<UserControl x:Class="ToDoList.Task"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ToDoList"
             mc:Ignorable="d" 
             d:DesignHeight="30" d:DesignWidth="500">


    
    <Border Name="LayoutBorder"
            Background="#3d3d3d" 
            BorderBrush="#3d3d3d" 
            BorderThickness="0" 
            CornerRadius="8"
            Margin="2"
            Padding="3">
        <Grid Name="Layout" 
              Background="#3d3d3d"              
              MouseDown="OnEditTask"
              MouseEnter="IsTaskGotFocus"
              MouseLeave="IsTaskLostFocus">
            <Grid.Triggers>
                <EventTrigger RoutedEvent="MouseEnter">
                    <BeginStoryboard>
                        <Storyboard >
                            <DoubleAnimation Storyboard.TargetProperty="Opacity" 
                                             Storyboard.TargetName="DeleteButton"
                                    From="0.6"
                                    To="1"
                                    Duration="0:0:0.2"/>
                            <DoubleAnimation  Storyboard.TargetProperty="Width"
                                              Storyboard.TargetName="DeleteButton"
                                    From="30"
                                    To="60"
                                    Duration="0:0:0.2"/>
                            <DoubleAnimation  Storyboard.TargetProperty="Height"
                                              Storyboard.TargetName="DeleteButton"
                                    From="15"
                                    To="30"
                                    Duration="0:0:0.2"/>
                            <ColorAnimation  Storyboard.TargetProperty="Background.Color"
                                             Storyboard.TargetName="Layout"
                                    
                                    To="#999999"
                                    Duration="0:0:0.2"/>
                            <ColorAnimation  Storyboard.TargetProperty="Background.Color"
                                             Storyboard.TargetName="LayoutBorder"
        
                                    To="#999999"
                                    Duration="0:0:0.2"/>
                        </Storyboard>
                        
                    </BeginStoryboard>
                </EventTrigger>
                <EventTrigger RoutedEvent="MouseLeave">
                    <BeginStoryboard>
                        <Storyboard >
                            <ColorAnimation  Storyboard.TargetProperty="Background.Color"
                                             Storyboard.TargetName="Layout"
                    
                                        To="{Binding Laoyout.BackGround}"
                                        Duration="0:0:0.2"/>    
                            <ColorAnimation  Storyboard.TargetProperty="Background.Color"
                                             Storyboard.TargetName="LayoutBorder"
        
                                        To="{Binding Laoyout.BackGround}"
                                        Duration="0:0:0.2"/>
                        </Storyboard>

                    </BeginStoryboard>
                </EventTrigger>
            </Grid.Triggers>
            
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="30" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="60" />
            </Grid.ColumnDefinitions>

            <CheckBox Grid.Column ="0"
                      HorizontalAlignment="Center" 
                      VerticalAlignment="Center"
                      BorderBrush="Black"
                      IsChecked="{Binding IsChecked}"
                      Click="OnChaneTask"/>
            <TextBlock Grid.Column="1" 
                       FontSize="18"                   
                       TextWrapping="NoWrap"                   
                       LineHeight="30"     
                       MaxHeight="30"
                       VerticalAlignment="Center"
                       HorizontalAlignment="Left" 
                       Background="{Binding Laoyout.BackGround}"
                       Foreground="White"              
                       Text="{Binding Title, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
            <Border Grid.Column="2"
                Background="#e04f4b" 
                BorderBrush="#e04f4b" 
                BorderThickness="0" 
                CornerRadius="5"   
                Padding="2"
                Name="DeleteButton"
                Visibility="Hidden">
                <Button                     
                    BorderThickness="0"
                    Background="#e04f4b"
                    Content="Delete"
                    Foreground="White"
                    FontSize="12"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Click="OnDeleteTask" 
                    Width="60"
                    Height="25"/>
            </Border>
        </Grid>
    </Border>
</UserControl>
